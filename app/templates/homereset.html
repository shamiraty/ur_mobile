{% extends "base.html" %}
{% load static %}
{% block content %}
{% load custom_filters %}
{% block title %}{% endblock %}
{% block css %} 

{% endblock %}
{% load crispy_forms_tags %}
<body>
    <div class="container-fluid mt-1">
        <div class="row">
            <div class="col-md-6 offset-md-3">
                <div class="card"style="border-radius:1px">
                    <div class="card-header bg-light text-center text-primary">
                            <h6><i class="fa fa-key text-primary"></i> PIN / PHONE NUMBER RESET</h6>
                            </div>
                    <div class="card-body">
                        <div class="container mt-4">
                            <form id="personForm" role="form-horizontal" method="post" enctype="multipart/form-data" novalidate>
                                {% csrf_token %}
                                
                                <!-- Form fields -->
                                {{ form|crispy }}
                                
                                <!-- Submit button and footer -->
                                <div class="mt-4 text-center">
                                    <button type="submit" class="btn btn-primary btn-sm w-100" id="submitBtn"style="border-radius:2px">Reset</button>
                                </div>                             
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    {% block js %}
    {% if messages %}
    <script type="text/javascript">
        {% for message in messages %}
            Swal.fire({
                icon: 'success',
                title: 'Success!',
                text: '{{ message }}',
                position: 'center',
                toast: false,
                showConfirmButton: false,
                timer: 10000,
                timerProgressBar: true,
                background: '#f0f9ff',
                color: '#0d69a0',
                customClass: {
                    popup: 'swal2-border-radius',
                    title: 'swal2-title',
                    content: 'swal2-content',
                },
                padding: '2rem',
                didOpen: (popup) => {
                    popup.style.border = '0px solid #2196F3';
                },
            });
        {% endfor %}
    </script>   
{% endif %}

<script>
    // Directly submit the form when the Register button is clicked
    document.getElementById('submitBtn').addEventListener('click', function() {
        document.getElementById('personForm').submit(); // Submit the form
    });
</script>
{% endblock %}
{% endblock %}
    </div>
</body>
</html>
